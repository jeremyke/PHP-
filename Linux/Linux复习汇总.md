 ## 1.进程、线程、协程区别
 - 进程
 
    进程是一个程序在一个数据集中的一次动态执行过程，可以简单理解为“正在执行的程序”，是操作系统进行资源分配和调度的一个独立单位。包含程序代码，数据集和进程控制块。

 - 线程
 
    线程是进程的一个单一的顺序控制流程，是程序执行流的最小单元，是CPU调度和分派的基本单位。由线程 ID、程序计数器、寄存器集合和堆栈共同组成。一个进程可以包含多个线程。

 - 协程
 
    协程是一种用户态的轻量级线程，又称微线程，英文名 Coroutine，协程的调度完全由用户控制。
    
 
## 2.进程间通信与信号机制
 
#### 2.1 进程通信的应用场景
 
 - 数据传输：一个进程需要将它的数据发送给另一个进程，发送的数据量在一个字节到几兆字节之间。
 
 - 共享数据：多个进程想要操作共享数据，一个进程对共享数据的修改，别的进程应该立刻看到。
 
 - 通知事件：一个进程需要向另一个或一组进程发送消息，通知它（它们）发生了某种事件（如进程终止时要通知父进程）。
 
 - 资源共享：多个进程之间共享同样的资源。为了作到这一点，需要内核提供锁和同步机制。
 
 - 进程控制：有些进程希望完全控制另一个进程的执行（如Debug进程），此时控制进程希望能够拦截另一个进程的所有陷入和异常，并能够及时知道它的状态改变。
 
#### 2.2 进程间通信
 
linux ipc 按照历史来源主要有两大块:
 
```text
AT&T的system v IPc:管道，FIFO，信号。

BSD的socket Ipc :消息队列，共享内存，信号灯。
```

![image](https://github.com/jeremyke/PHPBlog/raw/master/Pictures/4160574660-59537c457c251.gif)
 
 #### 2.3 进程间通信方式
 
- 管道

```text
普通管道PIPE： 通常有两种限制,一是单工,只能单向传输;二是只能在父子或者兄弟进程间使用。

流管道s_pipe: 去除了第一种限制,为半双工，只能在父子或兄弟进程间使用，可以双向传输。

命名管道:name_pipe：去除了第二种限制,可以在许多并不相关的进程之间进行通讯。
```

- 信号量

信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。

- 消息队列

消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。

- 信号 

信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

- 共享内存

共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式，它是
针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号量，配合使用，来实现进程间的同步和通信。

- 套接字

套解口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同机器间的进程通信。

 
## 3. 线程间通信与信号机制

#### 3.1 通信方式

- 互斥锁

在访问共享资源前对互斥量进行加锁，在访问完成后释放互斥量。对互斥量进行加锁以后，其他试图再次对互斥量加锁的线程都会被阻塞直到当前线程释放该互斥锁。
如果释放互斥量时有一个以上的线程阻塞，那么所有该锁上的阻塞线程都会变成可运行状态，第一个变成运行状态的线程可以对互斥量加锁，其他线程就会看到互斥量
依然是锁着，只能再次阻塞等待它重新变成可用，这样，一次只有一个线程可以向前执行。

- 读写锁

读写锁有3种状态：读模式下加锁状态，写模式下加锁状态，不加锁状态。一次只有一个线程可以占有写模式的读写锁，但是多个线程可以同时占有读模式的读写锁。
当读写锁是写加锁状态时，在这个锁被解锁之前，所有试图对这个锁加锁的线程都会被阻塞。当读写锁在读加锁状态时，所有试图以读模式对它进行加锁的线程都可以
得到访问权，但是任何希望以写模式对此锁进行加锁的线程都会阻塞，直到所有的线程释放它们的读锁为止。

- 条件变量

条件变量通过允许线程阻塞和等待另一个线程发送信号的方法弥补了互斥锁的不足，它常和互斥锁一起使用。使用时，条件变量被用来阻塞一个线程，当条件不满足时，
线程往往解开相应的互斥锁并等待条件发生变化。一旦其它的某个线程改变了条件变量，它将通知相应的条件变量唤醒一个或多个正被此条件变量阻塞的线程。 这些线
程将重新锁定互斥锁并重新测试条件是否满足。

- 信号量

线程的信号和进程的信号量类似，使用线程的信号量可以高效地完成基于线程的资源计数。信号量实际上是一个非负的整数计数器，用来实现对公共资源的控制。在公共资
源增加的时候，信号量就增加；公共资源减少的时候，信号量就减少；只有当信号量的值大于0的时候，才能访问信号量所代表的公共资源。

#### 3.2 互斥与同步的区别

- 互斥：是指某一资源同时只允许一个访问者对其进行访问，具有唯一性和排它性。但互斥无法限制访问者对资源的访问顺序，即访问是无序的。

- 同步：主要是流程上的概念，是指在互斥的基础上（大多数情况），通过其它机制实现访问者对资源的有序访问。在大多数情况下，同步已经实现了互斥，特别是所有写入资源的情况必定是互斥的。少数情况是指可以允许多个访问者同时访问资源。

#### 3.3 互斥锁、条件变量和信号量的区别

- 互斥锁：互斥，一个线程占用了某个资源，那么其它的线程就无法访问，直到这个线程解锁，其它线程才可以访问。

- 条件变量：同步，一个线程完成了某一个动作就通过条件变量发送信号告诉别的线程，别的线程再进行某些动作。条件变量必须和互斥锁配合使用。

- 信号量：同步，一个线程完成了某一个动作就通过信号量告诉别的线程，别的线程再进行某些动作。而且信号量有一个更加强大的功能，信号量可以用作为资源计数器，把信号量的值初始化为某个资源当前可用的数量，使用一个之后递减，归还一个之后递增



## 4.链接
 
#### 4.1 链接的作用

当我们需要在不同的目录用到相同的文件时, 我们不需要在每一个目录都放相同的文件我们只需要在某个固定的目录放上该文件, 然后在其他的目录用 ln 命
令链接该文件即可。

#### 4.2 链接的分类

硬链接(Hard Link) 和 符号链接(Symbolic Link)又称为软链接

格式:
```text
软链接: ln -s 源文件 目标文件
硬链接: ln 源文件 目标文件
```

#### 4.3 理解软链接和硬链接

###### 4.3.1 索引节点(inode)又称i节点

```text
在Linux的文件系统中, 保存在磁盘分区中的文件不管是什么类型都给它分配一个编号, 称为索引节点号(Inode Index)
通过inode找到文件的具体物理存储位置, inode可以简单理解为指针
硬链接的作用是允许一个文件拥有多个有效路径, 以防止误删
文件真正删除的条件是该文件所有的硬链接文件都被删除
```
###### 4.3.2 硬链接

硬链接通过索引节点进行连接, 多个文件名指向同一索引节点, 同一索引节点指向的是同一文件

###### 4.3.3 软链接

本质是新建一个文件,保存原文件的路径名,相当于快捷方式,因此新建文件和原文件的inode是不同的

###### 4.3.4 软链接和硬链接的区别

```text
1. 硬链接不支持为目录创建硬链接,但软链接可以

2. 硬链接和软链接中对目标文件的修改都会在原文件中保持同步
    删除原文件, 硬链接目标文件不受影响; 删除硬链接目标文件, 原文件不受影响
    删除原文件, 软链接目标文件成为断链(没有链接对象); 删除软链接目标文件, 原文件不受影响
```
 